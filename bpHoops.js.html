<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<!--
generated by Pygments <http://pygments.org>
Copyright 2006-2019 by the Pygments team.
Licensed under the BSD license, see LICENSE for details.
-->
<html>
<head>
  <link rel='canonical' href='https://triquence.org/bpHoops.js.html' />
  <title>bpHoops.js</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
/*
generated by Pygments <http://pygments.org>
Copyright 2006-2019 by the Pygments team.
Licensed under the BSD license, see LICENSE for details.
*/
td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }
body .hll { background-color: #ffffcc }
body  { background: #f8f8f8; }
body .c { color: #408080; font-style: italic } /* Comment */
body .err { border: 1px solid #FF0000 } /* Error */
body .k { color: #008000; font-weight: bold } /* Keyword */
body .o { color: #666666 } /* Operator */
body .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
body .cm { color: #408080; font-style: italic } /* Comment.Multiline */
body .cp { color: #BC7A00 } /* Comment.Preproc */
body .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
body .c1 { color: #408080; font-style: italic } /* Comment.Single */
body .cs { color: #408080; font-style: italic } /* Comment.Special */
body .gd { color: #A00000 } /* Generic.Deleted */
body .ge { font-style: italic } /* Generic.Emph */
body .gr { color: #FF0000 } /* Generic.Error */
body .gh { color: #000080; font-weight: bold } /* Generic.Heading */
body .gi { color: #00A000 } /* Generic.Inserted */
body .go { color: #888888 } /* Generic.Output */
body .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
body .gs { font-weight: bold } /* Generic.Strong */
body .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
body .gt { color: #0044DD } /* Generic.Traceback */
body .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
body .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
body .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
body .kp { color: #008000 } /* Keyword.Pseudo */
body .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
body .kt { color: #B00040 } /* Keyword.Type */
body .m { color: #666666 } /* Literal.Number */
body .s { color: #BA2121 } /* Literal.String */
body .na { color: #7D9029 } /* Name.Attribute */
body .nb { color: #008000 } /* Name.Builtin */
body .nc { color: #0000FF; font-weight: bold } /* Name.Class */
body .no { color: #880000 } /* Name.Constant */
body .nd { color: #AA22FF } /* Name.Decorator */
body .ni { color: #999999; font-weight: bold } /* Name.Entity */
body .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
body .nf { color: #0000FF } /* Name.Function */
body .nl { color: #A0A000 } /* Name.Label */
body .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
body .nt { color: #008000; font-weight: bold } /* Name.Tag */
body .nv { color: #19177C } /* Name.Variable */
body .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
body .w { color: #bbbbbb } /* Text.Whitespace */
body .mb { color: #666666 } /* Literal.Number.Bin */
body .mf { color: #666666 } /* Literal.Number.Float */
body .mh { color: #666666 } /* Literal.Number.Hex */
body .mi { color: #666666 } /* Literal.Number.Integer */
body .mo { color: #666666 } /* Literal.Number.Oct */
body .sa { color: #BA2121 } /* Literal.String.Affix */
body .sb { color: #BA2121 } /* Literal.String.Backtick */
body .sc { color: #BA2121 } /* Literal.String.Char */
body .dl { color: #BA2121 } /* Literal.String.Delimiter */
body .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
body .s2 { color: #BA2121 } /* Literal.String.Double */
body .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
body .sh { color: #BA2121 } /* Literal.String.Heredoc */
body .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
body .sx { color: #008000 } /* Literal.String.Other */
body .sr { color: #BB6688 } /* Literal.String.Regex */
body .s1 { color: #BA2121 } /* Literal.String.Single */
body .ss { color: #19177C } /* Literal.String.Symbol */
body .bp { color: #008000 } /* Name.Builtin.Pseudo */
body .fm { color: #0000FF } /* Name.Function.Magic */
body .vc { color: #19177C } /* Name.Variable.Class */
body .vg { color: #19177C } /* Name.Variable.Global */
body .vi { color: #19177C } /* Name.Variable.Instance */
body .vm { color: #19177C } /* Name.Variable.Magic */
body .il { color: #666666 } /* Literal.Number.Integer.Long */

  </style>
</head>
<body>
<h2></h2>

<div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">Copyright 2022 James D. Miller</span>

<span class="cm">Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="cm">of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="cm">in the Software without restriction, including without limitation the rights</span>
<span class="cm">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="cm">copies of the Software, and to permit persons to whom the Software is</span>
<span class="cm">furnished to do so, subject to the following conditions:</span>

<span class="cm">The above copyright notice and this permission notice shall be included in all</span>
<span class="cm">copies or substantial portions of the Software.</span>

<span class="cm">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="cm">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="cm">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="cm">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="cm">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="cm">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="cm">SOFTWARE.</span>
<span class="cm">*/</span>

<span class="c1">// BiPartisan Hoops (bpH) module</span>
<span class="c1">// bpHoops.js</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;bpH _*-*_&#39;</span><span class="p">);</span>
<span class="c1">// 12:27 PM Sat August 20, 2022</span>

<span class="cm">/*</span>
<span class="cm">gwModule.js has an alphabetical list of all modules and their nicknames as added to the windows namespace.</span>
<span class="cm">*/</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">bpH</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
   
   <span class="c1">// Names starting with m_ indicate module-scope globals.</span>
   
   <span class="kd">var</span> <span class="nx">m_backBoardShot</span><span class="p">,</span> <span class="nx">m_hoopContact</span><span class="p">,</span> <span class="nx">m_hitTopSensor</span><span class="p">,</span> <span class="nx">m_hitBottomSensorFirst</span><span class="p">,</span> <span class="nx">m_firstExampleShot</span><span class="p">,</span> 
       <span class="nx">m_humanUseOfBasketBall</span><span class="p">,</span> <span class="nx">m_callCount</span><span class="p">,</span> <span class="nx">m_playList</span><span class="p">,</span> <span class="nx">m_initialTeamSize</span><span class="p">,</span> <span class="nx">m_reportedWin</span><span class="p">,</span> 
       <span class="nx">m_clientName</span><span class="p">,</span> <span class="nx">m_timeOfStart</span><span class="p">,</span> <span class="nx">m_millerShot</span><span class="p">,</span> <span class="nx">m_millerAvailable</span><span class="p">,</span> <span class="nx">m_partisanNature</span><span class="p">,</span>
       <span class="nx">m_closingRemark</span><span class="p">,</span> <span class="nx">m_reverseFeeder</span><span class="p">,</span> <span class="nx">m_stopFeeder</span><span class="p">,</span> <span class="nx">m_priorShotIndex</span><span class="p">,</span> <span class="nx">m_puck_pos_2d_m</span><span class="p">,</span> <span class="nx">m_puck_v_2d_mps</span><span class="p">,</span> 
       <span class="nx">m_shotReportIssued</span><span class="p">,</span> <span class="nx">m_hitRightWall</span><span class="p">,</span> <span class="nx">m_chokeShotReports</span><span class="p">,</span> <span class="nx">m_timer_s</span><span class="p">,</span> <span class="nx">m_gameState</span><span class="p">;</span>
   
   <span class="kd">var</span> <span class="nx">m_wallMap</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;wall5&#39;</span><span class="o">:</span><span class="s1">&#39;leftHoop&#39;</span><span class="p">,</span> <span class="s1">&#39;wall12&#39;</span><span class="o">:</span><span class="s1">&#39;rightHoop&#39;</span><span class="p">,</span> <span class="s1">&#39;wall21&#39;</span><span class="o">:</span><span class="s1">&#39;backboard&#39;</span><span class="p">,</span> <span class="s1">&#39;wall23&#39;</span><span class="o">:</span><span class="s1">&#39;bottomSensor&#39;</span><span class="p">,</span> <span class="s1">&#39;wall24&#39;</span><span class="o">:</span><span class="s1">&#39;topSensor&#39;</span><span class="p">,</span> <span class="s1">&#39;wall26&#39;</span><span class="o">:</span><span class="s1">&#39;rightWallSensor&#39;</span><span class="p">};</span>
   
   <span class="kd">let</span> <span class="nx">monkeyText</span> <span class="o">=</span> <span class="s1">&#39;\\[30px Arial]&quot;Independent voters tend to be more pragmatic in their political views, weighing the specifics of &#39;</span> <span class="o">+</span> 
                    <span class="s1">&#39;\\[30px Arial]each issue rather than aligning strictly with one party&#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span> <span class="s1">&#39;s platform across the board.&quot; &#39;</span> <span class="o">+</span> 
                    <span class="s1">&#39;\\ \\[20px Arial](Source: &quot;The Rise of Independent Voters&quot; by Rhodes Cook in a 2012 Bipartisan Policy Center report)&#39;</span> <span class="o">+</span>
                    <span class="s1">&#39;\\ \\[30px Arial]Hmm, vaguely familiar, Monkey Hunt?&#39;</span>
   <span class="kd">var</span> <span class="nx">m_nameMap</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;trump2&#39;</span><span class="o">:</span>   <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Donald&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;   (former President of the United States, Donald Trump)&#39;</span><span class="p">},</span> 
      <span class="s1">&#39;biden2&#39;</span><span class="o">:</span>   <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Joe&#39;</span><span class="p">,</span>    <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;   (President of the United States, Joe Biden)&#39;</span><span class="p">},</span> 
      <span class="s1">&#39;harris&#39;</span><span class="o">:</span>   <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Kamala&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;   (Vice President of the United States, Kamala Harris)&#39;</span><span class="p">},</span> 
      <span class="s1">&#39;pence&#39;</span><span class="o">:</span>    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Mike&#39;</span><span class="p">,</span>   <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;   (former Vice President of the United States, Mike Pence)&#39;</span><span class="p">},</span> 
      <span class="s1">&#39;pelosi&#39;</span><span class="o">:</span>   <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Nancy&#39;</span><span class="p">,</span>  <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;   (Speaker of the United States House of Representatives, Nancy Pelosi)&#39;</span><span class="p">},</span> 
      <span class="s1">&#39;schumer&#39;</span><span class="o">:</span>  <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Chuck&#39;</span><span class="p">,</span>  <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;   (Majority Leader of the United States Senate, Chuck Schumer)&#39;</span><span class="p">},</span> 
      <span class="s1">&#39;mcconnell&#39;</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Mitch&#39;</span><span class="p">,</span>  <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;   (Minority Leader of the United States Senate, Mitch McConnell)&#39;</span><span class="p">},</span> 
      <span class="s1">&#39;mccarthy&#39;</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Kevin&#39;</span><span class="p">,</span>  <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;   (Minority Leader of the United States House of Representatives, Kevin McCarthy)&#39;</span><span class="p">},</span>
      
      <span class="s1">&#39;elephant-1&#39;</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Republican&#39;</span><span class="p">,</span>  
         <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;\\[30px Arial]&quot;The Republican Party was founded in 1854 by former members of the Whig Party\\[30px Arial]who opposed the expansion of slavery into the western territories.&quot;\\ \\[20px Arial](Source: &quot;History of the Republican Party&quot; at www.gop.com)&#39;</span><span class="p">},</span>
      <span class="s1">&#39;elephant-2&#39;</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Republican&#39;</span><span class="p">,</span>  
         <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;\\[30px Arial]&quot;Abraham Lincoln, the 16th President of the United States, was the first Republican president,\\[30px Arial]leading the nation during the American Civil War.&quot;\\ \\[20px Arial](Source: Biography.com&#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;s&quot;</span><span class="o">+</span> <span class="s1">&#39; &quot;Abraham Lincoln&quot; page)&#39;</span><span class="p">},</span>
      <span class="s1">&#39;elephant-3&#39;</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Republican&#39;</span><span class="p">,</span>  
         <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;\\[30px Arial]&quot;The Republican Party&#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span> <span class="s1">&#39;s pro-business philosophy rejects the notion that the economy is a fixed pie, \\[30px Arial]in which one person&#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span> <span class="s1">&#39;s gain is another&#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span> <span class="s1">&#39;s loss.&quot; \\ \\[20px Arial](Source: &quot;The Republican Way&quot; by Michael Barone in The Wall Street Journal, August 11, 2016)&#39;</span><span class="p">},</span>
      <span class="s1">&#39;elephant-4&#39;</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Republican&#39;</span><span class="p">,</span>  
         <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;\\[30px Arial]&quot;The Republican Party has been a champion of limiting the size and scope \\[30px Arial]of the federal government, advocating for lower taxes and deregulation.&quot; \\ \\[20px Arial](Source: &quot;Basic Republican Principles&quot; by Ed Feulner in The Heritage Foundation, February 25, 2013)&#39;</span><span class="p">},</span>
      
      <span class="s1">&#39;donkey-1&#39;</span><span class="o">:</span>   <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Democrat&#39;</span><span class="p">,</span>    
         <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;\\[30px Arial]&quot;The Democratic Party championed the cause of small farmers, urban laborers, \\[30px Arial]and immigrant groups in the late 19th century under President Grover Cleveland&#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span> <span class="s1">&#39;s leadership.&quot; \\ \\[20px Arial](Source: &quot;The Democratic Party&quot; by Nelson W. Polsby in Handbook of Political Science, Addison-Wesley, 1975)&#39;</span><span class="p">},</span>
      <span class="s1">&#39;donkey-2&#39;</span><span class="o">:</span>   <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Democrat&#39;</span><span class="p">,</span>    
         <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;\\[30px Arial]&quot;Democrats have positioned themselves as supporters of workers&#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span> <span class="s1">&#39; rights, \\[30px Arial]fighting for issues like a higher minimum wage, paid family leave, and labor union protections.&quot; \\ \\[20px Arial](Source: &quot;The Democrats and American Labor&quot; by Michael Kazin in Dissent Magazine, Summer 2019)&#39;</span><span class="p">},</span>
      <span class="s1">&#39;donkey-3&#39;</span><span class="o">:</span>   <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Democrat&#39;</span><span class="p">,</span>    
         <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;\\[30px Arial]&quot;The Democratic Party was the party of the &#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span> <span class="s1">&#39;common man&#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span> <span class="s1">&#39; and favored westward expansion, \\[30px Arial]territorial acquisition, and cheap land for settlers in the 19th century.&quot; \\ \\[20px Arial](Source: &quot;The Rise of the Democratic Party&quot; by Sean Wilentz in The New York Times, April 26, 2005)&#39;</span><span class="p">},</span>
      <span class="s1">&#39;donkey-4&#39;</span><span class="o">:</span>   <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Democrat&#39;</span><span class="p">,</span>    
         <span class="s1">&#39;title&#39;</span><span class="o">:</span><span class="s1">&#39;\\[30px Arial]The Democratic Party has been a champion of civil rights, from President Harry Truman&#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span> <span class="s1">&#39;s \\[30px Arial]integration of the armed forces to Lyndon B. Johnson signing the Civil Rights Act of 1964. \\ \\[20px Arial](Source: &quot;The Democrats&#39;</span> <span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span> <span class="s1">&#39; Civil Rights History&quot; by John Hendrickson in The Atlantic, July 22, 2020)&#39;</span><span class="p">},</span>
      
      <span class="s1">&#39;monkey-1&#39;</span><span class="o">:</span>   <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="o">:</span><span class="s1">&#39;Independent&#39;</span><span class="p">,</span> 
         <span class="s1">&#39;title&#39;</span><span class="o">:</span> <span class="nx">monkeyText</span><span class="p">},</span>
   <span class="p">};</span>

   <span class="kd">var</span> <span class="nx">m_democratNames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;biden2&#39;</span><span class="p">,</span><span class="s1">&#39;harris&#39;</span><span class="p">,</span><span class="s1">&#39;schumer&#39;</span><span class="p">,</span><span class="s1">&#39;pelosi&#39;</span><span class="p">,</span><span class="s1">&#39;donkey-1&#39;</span><span class="p">,</span><span class="s1">&#39;donkey-2&#39;</span><span class="p">,</span><span class="s1">&#39;donkey-3&#39;</span><span class="p">,</span><span class="s1">&#39;donkey-4&#39;</span><span class="p">];</span>
   <span class="kd">var</span> <span class="nx">m_republicanNames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;trump2&#39;</span><span class="p">,</span><span class="s1">&#39;pence&#39;</span><span class="p">,</span><span class="s1">&#39;mcconnell&#39;</span><span class="p">,</span><span class="s1">&#39;mccarthy&#39;</span><span class="p">,</span><span class="s1">&#39;elephant-1&#39;</span><span class="p">,</span><span class="s1">&#39;elephant-2&#39;</span><span class="p">,</span><span class="s1">&#39;elephant-3&#39;</span><span class="p">,</span><span class="s1">&#39;elephant-4&#39;</span><span class="p">];</span>
   <span class="kd">var</span> <span class="nx">m_independentNames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;monkey-1&#39;</span><span class="p">];</span>
   
   <span class="kd">var</span> <span class="nx">m_numberNames</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="o">:</span><span class="s1">&#39;Zero&#39;</span><span class="p">,</span><span class="mi">1</span><span class="o">:</span><span class="s1">&#39;One&#39;</span><span class="p">,</span><span class="mi">2</span><span class="o">:</span><span class="s1">&#39;Two&#39;</span><span class="p">,</span><span class="mi">3</span><span class="o">:</span><span class="s1">&#39;Three&#39;</span><span class="p">,</span><span class="mi">4</span><span class="o">:</span><span class="s1">&#39;Four&#39;</span><span class="p">,</span><span class="mi">5</span><span class="o">:</span><span class="s1">&#39;Five&#39;</span><span class="p">,</span><span class="mi">6</span><span class="o">:</span><span class="s1">&#39;Six&#39;</span><span class="p">,</span><span class="mi">7</span><span class="o">:</span><span class="s1">&#39;Seven&#39;</span><span class="p">,</span><span class="mi">8</span><span class="o">:</span><span class="s1">&#39;Eight&#39;</span><span class="p">,</span><span class="mi">9</span><span class="o">:</span><span class="s1">&#39;Nine&#39;</span><span class="p">};</span>
   
   <span class="kd">var</span> <span class="nx">m_version</span> <span class="o">=</span> <span class="s2">&quot;v2&quot;</span><span class="p">;</span>
   <span class="kd">var</span> <span class="nx">m_gameState</span> <span class="o">=</span> <span class="p">{};</span>
   
   <span class="c1">// module globals for objects brought in by initializeModule</span>
   <span class="c1">// (none)</span>
   
   <span class="c1">///////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
   <span class="c1">///////////////////////////////////////////////////////////////////////////////////////////////////////////////</span>
   
   <span class="kd">function</span> <span class="nx">initializeModule</span><span class="p">()</span> <span class="p">{</span>
   <span class="p">}</span>
   
   <span class="c1">// This prepares for analysis of the collision events from the game sensors. This is called when the user releases </span>
   <span class="c1">// the mouse button and either launches a cursor-spring shot (see gB.poolShot) or drops a puck (see mouseUp_handler in eventsHost).</span>
   <span class="kd">function</span> <span class="nx">resetShotState</span><span class="p">(</span> <span class="nx">pars</span> <span class="o">=</span> <span class="p">{})</span> <span class="p">{</span>
      <span class="nx">m_clientName</span> <span class="o">=</span> <span class="nx">uT</span><span class="p">.</span><span class="nx">setDefault</span><span class="p">(</span> <span class="nx">pars</span><span class="p">.</span><span class="nx">clientName</span><span class="p">,</span> <span class="s2">&quot;local&quot;</span><span class="p">);</span>
      <span class="c1">// puck4 is in flight at the beginning.</span>
      <span class="kd">let</span> <span class="nx">puckName</span> <span class="o">=</span> <span class="nx">uT</span><span class="p">.</span><span class="nx">setDefault</span><span class="p">(</span> <span class="nx">pars</span><span class="p">.</span><span class="nx">puckName</span><span class="p">,</span> <span class="s2">&quot;puck4&quot;</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">initializing</span> <span class="o">=</span> <span class="nx">uT</span><span class="p">.</span><span class="nx">setDefault</span><span class="p">(</span> <span class="nx">pars</span><span class="p">.</span><span class="nx">initializing</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
      
      <span class="nx">m_puck_v_2d_mps</span> <span class="o">=</span> <span class="nx">uT</span><span class="p">.</span><span class="nx">setDefault</span><span class="p">(</span> <span class="nx">pars</span><span class="p">.</span><span class="nx">puck_v_2d_mps</span><span class="p">,</span> <span class="k">new</span> <span class="nx">wS</span><span class="p">.</span><span class="nx">Vec2D</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">));</span>
      <span class="nx">m_puck_pos_2d_m</span> <span class="o">=</span> <span class="nx">uT</span><span class="p">.</span><span class="nx">setDefault</span><span class="p">(</span> <span class="nx">pars</span><span class="p">.</span><span class="nx">puck_pos_2d_m</span><span class="p">,</span> <span class="k">new</span> <span class="nx">wS</span><span class="p">.</span><span class="nx">Vec2D</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">));</span>
      
      <span class="nx">m_backBoardShot</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">m_hoopContact</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">m_hitTopSensor</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">m_hitBottomSensorFirst</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">m_hitRightWall</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">m_callCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">m_shotReportIssued</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="nx">initializing</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">m_firstExampleShot</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="nx">m_millerShot</span> <span class="o">=</span> <span class="s2">&quot;no attempt yet&quot;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="nx">m_firstExampleShot</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
         <span class="c1">// check the puck in flight at start (puck4, normally the basketball).</span>
         <span class="k">if</span> <span class="p">((</span><span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">puckMap</span><span class="p">[</span> <span class="nx">puckName</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">puckMap</span><span class="p">[</span> <span class="nx">puckName</span><span class="p">].</span><span class="nx">imageID</span> <span class="o">==</span> <span class="s2">&quot;miller&quot;</span><span class="p">))</span> <span class="p">{</span> 
            <span class="nx">m_millerShot</span> <span class="o">=</span> <span class="s2">&quot;attempted&quot;</span><span class="p">;</span>
         <span class="p">}</span>
      <span class="p">}</span>
      
      <span class="nx">m_chokeShotReports</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#pw_basketball&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;quiet&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// inhibit long shot reports</span>
   <span class="p">}</span>
   
   <span class="kd">function</span> <span class="nx">stopAllTimers</span><span class="p">()</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">(</span> <span class="nx">m_closingRemark</span><span class="p">);</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">(</span> <span class="nx">m_reverseFeeder</span><span class="p">);</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">(</span> <span class="nx">m_stopFeeder</span><span class="p">);</span>   
   <span class="p">}</span>
   <span class="kd">function</span> <span class="nx">stopAllMessages</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">].</span><span class="nx">resetMessage</span><span class="p">();</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;gameTitle&#39;</span><span class="p">].</span><span class="nx">resetMessage</span><span class="p">();</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help&#39;</span><span class="p">].</span><span class="nx">resetMessage</span><span class="p">();</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help2&#39;</span><span class="p">].</span><span class="nx">resetMessage</span><span class="p">();</span>
   <span class="p">}</span>
   
   <span class="kd">function</span> <span class="nx">initializeGame</span><span class="p">(</span> <span class="nx">version</span><span class="o">=</span><span class="s2">&quot;v2&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;showTimer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;shutDown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;timeWarningGiven&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      
      <span class="nx">stopAllTimers</span><span class="p">();</span>
      <span class="nx">stopAllMessages</span><span class="p">();</span>
       
      <span class="nx">m_timer_s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;hoopsTimer&#39;</span><span class="p">].</span><span class="nx">loc_px</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="o">:</span><span class="mi">30</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="o">:</span><span class="mi">60</span><span class="p">};</span>
      
      <span class="nx">m_version</span> <span class="o">=</span> <span class="nx">version</span><span class="p">;</span>
      <span class="nx">m_reportedWin</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">m_humanUseOfBasketBall</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">m_timeOfStart</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
      <span class="nx">m_priorShotIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      
      <span class="nx">resetShotState</span><span class="p">({</span><span class="s1">&#39;initializing&#39;</span><span class="o">:</span><span class="kc">true</span><span class="p">});</span>
      
      <span class="c1">// Make sure the auto-feeder wall is in it&#39;s starting position.</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">wallMap</span><span class="p">[</span><span class="s1">&#39;wall25&#39;</span><span class="p">].</span><span class="nx">setPosition</span><span class="p">(</span> <span class="k">new</span> <span class="nx">wS</span><span class="p">.</span><span class="nx">Vec2D</span><span class="p">(</span><span class="mf">20.7</span><span class="p">,</span><span class="mf">0.58</span><span class="p">));</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">wallMap</span><span class="p">[</span><span class="s1">&#39;wall25&#39;</span><span class="p">].</span><span class="nx">setVelocity</span><span class="p">(</span> <span class="k">new</span> <span class="nx">wS</span><span class="p">.</span><span class="nx">Vec2D</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">));</span>
      
      <span class="c1">// Make a roster based on the politician faces in the capture.</span>
      <span class="kd">let</span> <span class="nx">someDemocrats</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="kd">let</span> <span class="nx">someRepublicans</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="kd">let</span> <span class="nx">someIndependents</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">m_millerAvailable</span> <span class="o">=</span> <span class="kc">false</span>
      <span class="nx">m_playList</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">puckName</span> <span class="k">in</span> <span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">puckMap</span><span class="p">)</span> <span class="p">{</span>
         <span class="kd">let</span> <span class="nx">imageID</span> <span class="o">=</span> <span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">puckMap</span><span class="p">[</span> <span class="nx">puckName</span><span class="p">].</span><span class="nx">imageID</span><span class="p">;</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">imageID</span> <span class="k">in</span> <span class="nx">m_nameMap</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">m_playList</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">imageID</span><span class="p">);</span>
         <span class="p">}</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">m_democratNames</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span> <span class="nx">imageID</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">someDemocrats</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">m_republicanNames</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span> <span class="nx">imageID</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">someRepublicans</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">m_independentNames</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span> <span class="nx">imageID</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">someIndependents</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">imageID</span> <span class="o">==</span> <span class="s1">&#39;miller&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">m_millerAvailable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="p">}</span>
      <span class="p">}</span>
      <span class="c1">//m_playList = [&#39;biden2&#39;,&#39;harris&#39;];  // for quick testing...</span>
      <span class="c1">//m_playList = [&#39;biden2&#39;];  // for even quicker testing...</span>
      <span class="c1">//m_playList = [&#39;donkey-1&#39;,&#39;elephant-1&#39;,&#39;monkey-1&#39;];  // v2 testing...</span>
      
      <span class="nx">m_initialTeamSize</span> <span class="o">=</span> <span class="nx">m_playList</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="nx">someDemocrats</span> <span class="o">&amp;&amp;</span> <span class="nx">someRepublicans</span> <span class="o">&amp;&amp;</span> <span class="nx">someIndependents</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">m_partisanNature</span> <span class="o">=</span> <span class="s1">&#39;from multiple perspectives&#39;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">someDemocrats</span> <span class="o">&amp;&amp;</span> <span class="nx">someRepublicans</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">m_partisanNature</span> <span class="o">=</span> <span class="s1">&#39;from both sides of the aisle&#39;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">someDemocrats</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">someRepublicans</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">m_partisanNature</span> <span class="o">=</span> <span class="s1">&#39;from the democratic side of the aisle&#39;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">someDemocrats</span> <span class="o">&amp;&amp;</span> <span class="nx">someRepublicans</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">m_partisanNature</span> <span class="o">=</span> <span class="s1">&#39;from the republican side of the aisle&#39;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">someDemocrats</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">someRepublicans</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">m_partisanNature</span> <span class="o">=</span> <span class="s1">&#39;from either side of the aisle&#39;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="nx">m_partisanNature</span> <span class="o">=</span> <span class="s1">&#39;from a variety of perspectives&#39;</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;gameTitle&#39;</span><span class="p">].</span><span class="nx">loc_px</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="o">:</span><span class="mi">450</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="o">:</span><span class="mi">350</span><span class="p">};</span>
      
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;gameTitle&#39;</span><span class="p">].</span><span class="nx">setFont</span><span class="p">(</span><span class="s1">&#39;50px Arial&#39;</span><span class="p">);</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;gameTitle&#39;</span><span class="p">].</span><span class="nx">popAtEnd</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">version</span> <span class="o">==</span> <span class="s2">&quot;v2&quot;</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;gameTitle&#39;</span><span class="p">].</span><span class="nx">newMessage</span><span class="p">(</span><span class="s2">&quot;Bipartisan Hoops[base]&quot;</span> <span class="o">+</span>
                 <span class="s2">&quot;\\  [30px Arial, lightgray]a game for the curious U.S. citizen[base]&quot;</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">);</span> 
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;gameTitle&#39;</span><span class="p">].</span><span class="nx">newMessage</span><span class="p">(</span><span class="s2">&quot;Bipartisan Hoops &quot;</span> <span class="o">+</span> <span class="s2">&quot;[50px Arial, #CD5A00](&quot;</span> <span class="o">+</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">8217</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;21-&quot;</span> <span class="o">+</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">8217</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;22)[base]&quot;</span> <span class="o">+</span>
                 <span class="s2">&quot;\\  [30px Arial, lightgray]a game for the weary U.S. citizen[base]&quot;</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">);</span> 
      <span class="p">}</span>
      
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help&#39;</span><span class="p">].</span><span class="nx">loc_px</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="o">:</span><span class="mi">75</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="o">:</span><span class="mi">95</span><span class="p">};</span>
      <span class="kd">let</span> <span class="nx">politicianPhrase</span> <span class="o">=</span> <span class="p">(</span><span class="nx">m_version</span> <span class="o">==</span> <span class="s2">&quot;v2&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;mascots&quot;</span> <span class="o">:</span> <span class="s2">&quot;politicians (or me)&quot;</span><span class="p">;</span>
      <span class="kd">let</span> <span class="nx">facePhrase</span> <span class="o">=</span> <span class="p">(</span><span class="nx">m_version</span> <span class="o">==</span> <span class="s2">&quot;v2&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;mascot&quot;</span> <span class="o">:</span> <span class="s2">&quot;face&quot;</span><span class="p">;</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help&#39;</span><span class="p">].</span><span class="nx">newMessageSeries</span><span class="p">({</span>
         <span class="mi">1</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">8.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;The view:&quot;</span> <span class="o">+</span> 
                                <span class="s2">&quot;\\    use the \&quot;[base,yellow]esc[base]\&quot; key to exit back to normal view&quot;</span> <span class="o">+</span>
                                <span class="s2">&quot;\\    \&quot;[base,yellow]v[base]\&quot; key to return to full-screen view&quot;</span> <span class="o">+</span> 
                                <span class="s2">&quot;\\    \&quot;[base,yellow]5[base]\&quot; key to restart this demo (including this help)&quot;</span> <span class="o">+</span>
                                <span class="s2">&quot;\\    \&quot;[base,yellow]0[base]\&quot; key to exit and reset (nuke) everything&quot;</span><span class="p">},</span>
         <span class="mi">2</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">6.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s1">&#39;Please note:&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    Any shooting will stop this help series.&#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;\\    Games are limited to [base,yellow]100[base] seconds.&#39;</span><span class="p">},</span>
         <span class="mi">3</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">8.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s1">&#39;Position the ball before the shot:&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    hold the &quot;[base,yellow]ctrl[base]&quot; key down while dragging the basketball&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    in a similar way, encourage one of the &#39;</span> <span class="o">+</span> <span class="nx">politicianPhrase</span> <span class="o">+</span> <span class="s1">&#39; to get into the game&#39;</span><span class="p">},</span>
         <span class="mi">4</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">8.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;Aim your shot:&quot;</span> <span class="o">+</span> 
                                <span class="s2">&quot;\\    [base,yellow]drag[base] the cursor, over, and then off the basketball, to change shot speed and direction&quot;</span> <span class="o">+</span>
                                <span class="s2">&quot;\\    (you&#39;ll see the predicted path of the ball)&quot;</span><span class="p">},</span>
         <span class="mi">5</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">8.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;Fine tune it:&quot;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    press the &quot;[base,yellow]b[base]&quot; key to enable finer positioning&#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;\\    press &quot;[base,yellow]b[base]&quot; again to disable it&#39;</span><span class="p">},</span>
         <span class="mi">6</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">8.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s1">&#39;Shoot:&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    [base,yellow]release[base] the mouse button&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    (release over the basketball to cancel the shot)&#39;</span><span class="p">},</span>
         <span class="mi">7</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">8.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s1">&#39;Scoring:&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    [base,yellow]100[base]: shot rattles in&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    [base,yellow]200[base]: swish shot&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    [base,yellow]300[base]: bank shot that rattles in&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    [base,yellow]400[base]: clean bank shot&#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;\\    [base,yellow]500[base]: trick shot&#39;</span><span class="p">},</span>
         <span class="mi">8</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">12.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s1">&#39;Aim for a bank shot:&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    Bank shots with a &#39;</span> <span class="o">+</span> <span class="nx">facePhrase</span> <span class="o">+</span> <span class="s1">&#39; are easier if it hits the backboard with a [base,yellow]vertical[base] orientation.&#39;</span> <span class="o">+</span> 
                                <span class="s2">&quot;\\    Click on a &quot;</span> <span class="o">+</span> <span class="nx">facePhrase</span> <span class="o">+</span> <span class="s2">&quot; while it&#39;s resting on the ground,&quot;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    then use the [base,yellow]&quot;c&quot;[base] key to attach to the center (and avoid rotation).&#39;</span> <span class="o">+</span> 
                                <span class="s1">&#39;\\    This will keep the orientation vertical while aiming the shot.&#39;</span><span class="p">},</span>
         <span class="mi">9</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">8.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;Try unlocked shooting (flinging can be fun):&quot;</span> <span class="o">+</span> 
                                 <span class="s1">&#39;\\   press &quot;[base,yellow]ctrl-shift-L[base]&quot;&#39;</span> <span class="o">+</span> 
                                 <span class="s1">&#39;\\   (&quot;[base,yellow]ctrl-shift-L[base]&quot; again to lock it)&#39;</span><span class="p">}</span>
      <span class="p">});</span>
   <span class="p">}</span>
   
   <span class="kd">function</span> <span class="nx">checkTimeLimit</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">countdownStart_s</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="c1">// reference point calculating countdown, zero after this much time</span>
      <span class="kd">let</span> <span class="nx">startShowingTimer_s</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>
      <span class="kd">let</span> <span class="nx">shutdownTime_s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help2&#39;</span><span class="p">].</span><span class="nx">loc_px</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="o">:</span><span class="mi">325</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="o">:</span><span class="mi">230</span><span class="p">};</span>
      
      <span class="nx">m_timer_s</span> <span class="o">+=</span> <span class="nx">gW</span><span class="p">.</span><span class="nx">getDeltaT_s</span><span class="p">();</span>
      <span class="kd">let</span> <span class="nx">countdownTimer_s</span> <span class="o">=</span> <span class="nx">countdownStart_s</span> <span class="o">-</span> <span class="nx">m_timer_s</span><span class="p">;</span>
      <span class="kd">let</span> <span class="nx">timeRemaining_s</span> <span class="o">=</span> <span class="nx">countdownTimer_s</span> <span class="o">-</span> <span class="nx">shutdownTime_s</span><span class="p">;</span>
      
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_reportedWin</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">countdownTimer_s</span> <span class="o">&lt;</span> <span class="nx">shutdownTime_s</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;shutDown&#39;</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;shutDown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;showTimer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            
            <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help2&#39;</span><span class="p">].</span><span class="nx">newMessage</span><span class="p">(</span><span class="s2">&quot;[30px Arial]You can score one last time (shoot as many times as you like).&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
            
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">countdownTimer_s</span> <span class="o">&gt;=</span> <span class="nx">shutdownTime_s</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">countdownTimer_s</span> <span class="o">&lt;</span> <span class="nx">startShowingTimer_s</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;showTimer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;hoopsTimer&#39;</span><span class="p">].</span><span class="nx">newMessage</span><span class="p">(</span> <span class="nx">timeRemaining_s</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="mf">0.2</span><span class="p">);</span>
            
            <span class="kd">let</span> <span class="nx">timeLeft_s</span> <span class="o">=</span> <span class="nx">startShowingTimer_s</span> <span class="o">-</span> <span class="nx">shutdownTime_s</span><span class="p">;</span>
            
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;timeWarningGiven&#39;</span><span class="p">])</span> <span class="p">{</span>
               <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help2&#39;</span><span class="p">].</span><span class="nx">newMessage</span><span class="p">(</span><span class="s2">&quot;[30px Arial]&quot;</span> <span class="o">+</span> <span class="nx">timeLeft_s</span> <span class="o">+</span> <span class="s2">&quot; seconds remaining...&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
               <span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;timeWarningGiven&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>
   <span class="p">}</span>
   
   <span class="c1">// This gets called in boxStuff.js for any puck collisions with walls during demo 5.e.basketball-par.</span>
   <span class="kd">function</span> <span class="nx">processBasketBallCollisions</span><span class="p">(</span> <span class="nx">wall</span><span class="p">,</span> <span class="nx">puck</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Exit if shooting a puck with no image OR not one of the walls in the map.</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">puck</span><span class="p">.</span><span class="nx">imageID</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span> <span class="o">!</span> <span class="p">(</span><span class="nx">wall</span><span class="p">.</span><span class="nx">name</span> <span class="k">in</span> <span class="nx">m_wallMap</span><span class="p">)))</span> <span class="k">return</span><span class="p">;</span>
      
      <span class="nx">m_callCount</span><span class="o">++</span><span class="p">;</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="nx">m_wallMap</span><span class="p">[</span> <span class="nx">wall</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;backboard&quot;</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">m_backBoardShot</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">m_wallMap</span><span class="p">[</span> <span class="nx">wall</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;leftHoop&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">m_wallMap</span><span class="p">[</span> <span class="nx">wall</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;rightHoop&quot;</span><span class="p">))</span> <span class="p">{</span>
         <span class="nx">m_hoopContact</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">m_wallMap</span><span class="p">[</span> <span class="nx">wall</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;topSensor&quot;</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">m_hitTopSensor</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">m_wallMap</span><span class="p">[</span> <span class="nx">wall</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;bottomSensor&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_hitTopSensor</span><span class="p">))</span> <span class="p">{</span>
         <span class="nx">m_hitBottomSensorFirst</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hit bottom sensor first&quot;</span><span class="p">);</span>
         
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">m_wallMap</span><span class="p">[</span> <span class="nx">wall</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;rightWallSensor&quot;</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">m_hitRightWall</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;hit right wall&quot;</span><span class="p">);</span>
      <span class="p">}</span>
      
      <span class="c1">// Run final check on bottom sensor to see if the puck went through the hoop from the top.</span>
      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">m_wallMap</span><span class="p">[</span> <span class="nx">wall</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;bottomSensor&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">m_hitTopSensor</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>  <span class="c1">// &amp;&amp; ( ! m_hitBottomSensorFirst)</span>
      
         <span class="c1">// final checks for prohibited, easy, and trick shots</span>
         <span class="kd">let</span> <span class="nx">prohibited</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
         <span class="kd">let</span> <span class="nx">tooEasy</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
         <span class="kd">let</span> <span class="nx">trickShot</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                  
         <span class="k">if</span> <span class="p">(</span><span class="nx">m_puck_v_2d_mps</span><span class="p">.</span><span class="nx">zeroLength</span><span class="p">()</span> <span class="o">||</span> <span class="nx">m_hitBottomSensorFirst</span><span class="p">)</span> <span class="p">{</span> 
            <span class="nx">prohibited</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">m_puck_v_2d_mps</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">m_puck_pos_2d_m</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="mf">4.0</span><span class="p">))</span> <span class="p">{</span> 
            <span class="nx">trickShot</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">m_puck_pos_2d_m</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">m_puck_pos_2d_m</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mf">10.0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">m_puck_pos_2d_m</span><span class="p">.</span><span class="nx">y</span> <span class="o">&gt;=</span> <span class="mf">4.0</span><span class="p">))</span> <span class="p">{</span> 
            <span class="nx">tooEasy</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="p">}</span>
         
         <span class="kd">let</span> <span class="nx">messageString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
         
         <span class="kd">let</span> <span class="nx">messageDuration</span><span class="p">;</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">m_version</span> <span class="o">==</span> <span class="s2">&quot;v2&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">prohibited</span><span class="p">)</span> <span class="p">{</span>
               <span class="nx">messageDuration</span> <span class="o">=</span> <span class="mf">2.5</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">tooEasy</span><span class="p">)</span> <span class="p">{</span>
               <span class="nx">messageDuration</span> <span class="o">=</span> <span class="mf">5.5</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
               <span class="nx">messageDuration</span> <span class="o">=</span> <span class="p">(</span><span class="nx">m_chokeShotReports</span><span class="p">)</span> <span class="o">?</span> <span class="mf">3.0</span> <span class="o">:</span> <span class="mf">7.0</span><span class="p">;</span>
            <span class="p">}</span>
         <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">messageDuration</span> <span class="o">=</span> <span class="p">(</span><span class="nx">m_chokeShotReports</span><span class="p">)</span> <span class="o">?</span> <span class="mf">3.0</span> <span class="o">:</span> <span class="mf">4.0</span><span class="p">;</span>
         <span class="p">}</span>
                  
         <span class="kd">let</span> <span class="nx">shotTypeString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
         <span class="kd">let</span> <span class="nx">scoreChange</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">prohibited</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">shotTypeString</span> <span class="o">=</span> <span class="s2">&quot;goal tending\\[25px Arial]   nice try&quot;</span><span class="p">;</span>
            <span class="nx">scoreChange</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">tooEasy</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">shotTypeString</span> <span class="o">=</span> <span class="s2">&quot;too easy \\[30px Arial,yellow]try a harder shot&quot;</span> <span class="o">+</span>
                             <span class="s2">&quot;\\[25px Arial]   move farther away (x &gt; 10)&quot;</span> <span class="o">+</span> 
                             <span class="s2">&quot;\\[25px Arial]   shoot from behind the backboard (x &lt; 1)&quot;</span> <span class="o">+</span>
                             <span class="s2">&quot;\\[25px Arial]   start lower (y &lt; 4)&quot;</span> <span class="o">+</span>
                             <span class="s2">&quot;\\[25px Arial]   be tricky (shoot to the right)&quot;</span><span class="p">;</span>
            <span class="nx">scoreChange</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">trickShot</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">m_hitRightWall</span><span class="p">)</span> <span class="p">{</span>
               <span class="nx">shotTypeString</span> <span class="o">=</span> <span class="s2">&quot; --- wow, super tricky shot&quot;</span><span class="p">;</span>
               <span class="nx">scoreChange</span> <span class="o">=</span> <span class="mi">900</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
               <span class="nx">shotTypeString</span> <span class="o">=</span> <span class="s2">&quot; --- pretty good, trick shot&quot;</span><span class="p">;</span>
               <span class="nx">scoreChange</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
            <span class="p">}</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">m_backBoardShot</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">m_hoopContact</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">shotTypeString</span> <span class="o">=</span> <span class="s2">&quot; --- bank shot rattles in&quot;</span><span class="p">;</span>
            <span class="nx">scoreChange</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">m_backBoardShot</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_hoopContact</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">shotTypeString</span> <span class="o">=</span> <span class="s2">&quot; --- clean bank shot&quot;</span><span class="p">;</span>
            <span class="nx">scoreChange</span> <span class="o">=</span> <span class="mi">400</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span> <span class="o">!</span> <span class="nx">m_backBoardShot</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">m_hoopContact</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">shotTypeString</span> <span class="o">=</span> <span class="s2">&quot; --- it rattles in&quot;</span><span class="p">;</span>
            <span class="nx">scoreChange</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span> <span class="o">!</span> <span class="nx">m_backBoardShot</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_hoopContact</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">shotTypeString</span> <span class="o">=</span> <span class="s2">&quot; --- swish shot&quot;</span><span class="p">;</span>
            <span class="nx">scoreChange</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
         <span class="p">}</span>
         
         <span class="c1">// If no aiming guide, just flinging it, give a bonus.</span>
         <span class="k">if</span> <span class="p">((</span> <span class="o">!</span> <span class="nx">gW</span><span class="p">.</span><span class="nx">clients</span><span class="p">[</span> <span class="nx">m_clientName</span><span class="p">].</span><span class="nx">ctrlShiftLock</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">scoreChange</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">scoreChange</span> <span class="o">+=</span> <span class="mi">200</span><span class="p">;</span>
            <span class="nx">shotTypeString</span> <span class="o">+=</span> <span class="s2">&quot; (fling bonus)&quot;</span><span class="p">;</span>
         <span class="p">}</span>
         
         <span class="k">if</span> <span class="p">(</span><span class="nx">m_firstExampleShot</span><span class="p">)</span> <span class="nx">scoreChange</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
         <span class="nx">gW</span><span class="p">.</span><span class="nx">clients</span><span class="p">[</span> <span class="nx">m_clientName</span><span class="p">].</span><span class="nx">score</span> <span class="o">+=</span> <span class="nx">scoreChange</span><span class="p">;</span>
         
         <span class="kd">let</span> <span class="nx">scoreString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
         <span class="nx">cT</span><span class="p">.</span><span class="nx">Client</span><span class="p">.</span><span class="nx">applyToAll</span><span class="p">(</span> <span class="nx">client</span> <span class="p">=&gt;</span> <span class="p">{</span> 
            <span class="kd">let</span> <span class="nx">scoreChangeString</span> <span class="o">=</span> <span class="p">(</span><span class="nx">client</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="nx">m_clientName</span><span class="p">)</span> <span class="o">?</span> <span class="nx">scoreChange</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">scoreString</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span> <span class="o">+</span> <span class="nx">client</span><span class="p">.</span><span class="nx">nameString</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;: [base,yellow]&#39;</span> <span class="o">+</span> <span class="nx">client</span><span class="p">.</span><span class="nx">score</span> <span class="o">+</span> <span class="s1">&#39; (+&#39;</span> <span class="o">+</span> <span class="nx">scoreChangeString</span> <span class="o">+</span> <span class="s1">&#39;)    [base]&#39;</span><span class="p">;</span>
         <span class="p">});</span>
         <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_reportedWin</span><span class="p">)</span> <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">].</span><span class="nx">newMessage</span><span class="p">(</span> <span class="nx">scoreString</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">);</span>
         
         <span class="k">if</span> <span class="p">(</span><span class="nx">prohibited</span> <span class="o">||</span> <span class="nx">tooEasy</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">messageString</span> <span class="o">=</span> <span class="nx">shotTypeString</span><span class="p">;</span>
            
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">puck</span><span class="p">.</span><span class="nx">imageID</span> <span class="o">==</span> <span class="s2">&quot;miller&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">m_millerShot</span> <span class="o">=</span> <span class="s2">&quot;made it&quot;</span><span class="p">;</span>
            <span class="nx">messageString</span> <span class="o">=</span> <span class="s2">&quot;a bit sluggish there, [base,yellow]Jim[base]&quot;</span> <span class="o">+</span> <span class="nx">shotTypeString</span> <span class="o">+</span>
                    <span class="s2">&quot;\\   [30px Arial] but it counts; maybe grab some coffee&quot;</span><span class="p">;</span>
         
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">puck</span><span class="p">.</span><span class="nx">imageID</span> <span class="o">==</span> <span class="s2">&quot;basketball&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_firstExampleShot</span><span class="p">)</span> <span class="nx">m_humanUseOfBasketBall</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">messageString</span> <span class="o">=</span> <span class="s2">&quot;excellent shooting&quot;</span> <span class="o">+</span> <span class="nx">shotTypeString</span> <span class="o">+</span>
                    <span class="s2">&quot;\\   [30px Arial] Good choice: a real basketball. Makes sense.&quot;</span><span class="p">;</span>
                    
         <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">puck</span><span class="p">.</span><span class="nx">imageID</span> <span class="o">==</span> <span class="s2">&quot;dandelion&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">messageString</span> <span class="o">=</span> <span class="s2">&quot;almost too easy&quot;</span> <span class="o">+</span> <span class="nx">shotTypeString</span> <span class="o">+</span>
                    <span class="s2">&quot;\\   [30px Arial] have to hand it to you; nice shot&quot;</span><span class="p">;</span>
            <span class="kd">let</span> <span class="nx">adderString</span> <span class="o">=</span>        
                    <span class="s2">&quot;\\   [25px Arial]       (try the basketball)&quot;</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_humanUseOfBasketBall</span><span class="p">)</span> <span class="nx">messageString</span> <span class="o">=</span> <span class="nx">messageString</span> <span class="o">+</span> <span class="nx">adderString</span><span class="p">;</span>
                                                 
         <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// Remove the &quot;good one&quot; for version 2 projectiles.</span>
            <span class="kd">let</span> <span class="nx">leadPhrase</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">uT</span><span class="p">.</span><span class="nx">oneOfThese</span><span class="p">([</span><span class="s1">&#39;elephant&#39;</span><span class="p">,</span><span class="s1">&#39;donkey&#39;</span><span class="p">,</span><span class="s1">&#39;monkey&#39;</span><span class="p">],</span> <span class="nx">puck</span><span class="p">.</span><span class="nx">imageID</span><span class="p">)</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;good one, &quot;</span><span class="p">;</span>
            <span class="nx">messageString</span> <span class="o">=</span> <span class="nx">leadPhrase</span> <span class="o">+</span> <span class="s2">&quot;[base,yellow]&quot;</span> <span class="o">+</span> <span class="nx">m_nameMap</span><span class="p">[</span> <span class="nx">puck</span><span class="p">.</span><span class="nx">imageID</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;[base]&quot;</span> <span class="o">+</span> <span class="nx">shotTypeString</span> <span class="o">+</span> <span class="s2">&quot;\\[25px Arial]&quot;</span> <span class="o">+</span> <span class="nx">m_nameMap</span><span class="p">[</span> <span class="nx">puck</span><span class="p">.</span><span class="nx">imageID</span><span class="p">][</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
         <span class="p">}</span>
         
         <span class="k">if</span> <span class="p">(</span><span class="nx">m_chokeShotReports</span><span class="p">)</span> <span class="nx">messageString</span> <span class="o">=</span> <span class="nx">shotTypeString</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot; --- &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
         
         <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_shotReportIssued</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_firstExampleShot</span><span class="p">)</span> <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;gameTitle&#39;</span><span class="p">].</span><span class="nx">newMessage</span><span class="p">(</span> <span class="nx">messageString</span><span class="p">,</span> <span class="nx">messageDuration</span><span class="p">);</span>
    
            <span class="c1">// Auto feeder (push a new face or mascot into the game)...</span>
            <span class="k">if</span> <span class="p">((</span><span class="nx">m_playList</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span> <span class="nx">puck</span><span class="p">.</span><span class="nx">imageID</span><span class="p">)</span> <span class="o">||</span> <span class="nx">m_firstExampleShot</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">m_playList</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
               <span class="cm">/* </span>
<span class="cm">               Keep the positioning of the object consistent, independent of user </span>
<span class="cm">               selected time-step or monitor frame-rate. (Slower physics requires </span>
<span class="cm">               longer system-wait times for the feeder to move.) Alternatively, you can </span>
<span class="cm">               apply this same correction to blockSpeed, instead of the wait times. </span>
<span class="cm">               In that case the feeder will always render at the same speed. </span>
<span class="cm">               But that will position the object poorly in some situations. </span>
<span class="cm">               */</span>
               <span class="kd">let</span> <span class="nx">blockSpeed_mps</span> <span class="o">=</span> <span class="mf">1.00</span><span class="p">;</span>
               <span class="kd">let</span> <span class="nx">waitCorrection</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">dt_RA_ms</span><span class="p">.</span><span class="nx">result</span> <span class="o">/</span> <span class="p">(</span><span class="nx">gW</span><span class="p">.</span><span class="nx">getDeltaT_s</span><span class="p">()</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span> <span class="p">);</span>
               <span class="c1">// Use a wall to push the next puck out for shooting</span>
               <span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">wallMap</span><span class="p">[</span><span class="s1">&#39;wall25&#39;</span><span class="p">].</span><span class="nx">setVelocity</span><span class="p">(</span> <span class="k">new</span> <span class="nx">wS</span><span class="p">.</span><span class="nx">Vec2D</span><span class="p">(</span> <span class="o">-</span><span class="nx">blockSpeed_mps</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
               <span class="c1">// 2.5 seconds later, reverse the motion.</span>
               <span class="nx">m_reverseFeeder</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">wallMap</span><span class="p">[</span><span class="s1">&#39;wall25&#39;</span><span class="p">].</span><span class="nx">setVelocity</span><span class="p">(</span> <span class="k">new</span> <span class="nx">wS</span><span class="p">.</span><span class="nx">Vec2D</span><span class="p">(</span> <span class="nx">blockSpeed_mps</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
               <span class="p">},</span> <span class="mi">2500</span> <span class="o">*</span> <span class="nx">waitCorrection</span><span class="p">);</span>
               <span class="c1">// Stop the wall and make sure it is all the way back, out of the way.         </span>
               <span class="nx">m_stopFeeder</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                  <span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">wallMap</span><span class="p">[</span><span class="s1">&#39;wall25&#39;</span><span class="p">].</span><span class="nx">setVelocity</span><span class="p">(</span> <span class="k">new</span> <span class="nx">wS</span><span class="p">.</span><span class="nx">Vec2D</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">));</span>
                  <span class="nx">gW</span><span class="p">.</span><span class="nx">aT</span><span class="p">.</span><span class="nx">wallMap</span><span class="p">[</span><span class="s1">&#39;wall25&#39;</span><span class="p">].</span><span class="nx">setPosition</span><span class="p">(</span> <span class="k">new</span> <span class="nx">wS</span><span class="p">.</span><span class="nx">Vec2D</span><span class="p">(</span><span class="mf">20.7</span><span class="p">,</span> <span class="mf">0.58</span><span class="p">));</span>
                  <span class="c1">//m_firstExampleShot = false;</span>
               <span class="p">},</span> <span class="mi">5000</span> <span class="o">*</span> <span class="nx">waitCorrection</span><span class="p">);</span>
               
               <span class="c1">// Now, after the first time through, the basketball shot, issue a reset as would </span>
               <span class="c1">// normally happen with real shots. This will set m_firstExampleShot to false.</span>
               <span class="k">if</span> <span class="p">(</span><span class="nx">m_firstExampleShot</span><span class="p">)</span> <span class="nx">resetShotState</span><span class="p">();</span>
            <span class="p">}</span>
            
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_firstExampleShot</span><span class="p">)</span> <span class="nx">m_shotReportIssued</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            
            <span class="c1">// After playing someone, remove from the play list.</span>
            <span class="nx">m_playList</span> <span class="o">=</span> <span class="nx">m_playList</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">name</span> <span class="p">=&gt;</span> <span class="p">(</span><span class="nx">name</span> <span class="o">!=</span> <span class="nx">puck</span><span class="p">.</span><span class="nx">imageID</span><span class="p">)</span> <span class="p">);</span>
         <span class="p">}</span>
            
         <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">m_reportedWin</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">((</span><span class="nx">m_playList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;shutDown&#39;</span><span class="p">]))</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">shutDownGame</span><span class="p">(</span> <span class="nx">messageDuration</span><span class="p">);</span>
         <span class="p">}</span>
         
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;collisions, list = &quot;</span> <span class="o">+</span> <span class="nx">m_callCount</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span>  <span class="nx">m_playList</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
         <span class="nx">m_callCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
   <span class="p">}</span>
   
   <span class="kd">function</span> <span class="nx">shutDownGame</span><span class="p">(</span> <span class="nx">messageDelay</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">playTime_s</span> <span class="o">=</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">m_timeOfStart</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="p">;</span>
      <span class="nx">cT</span><span class="p">.</span><span class="nx">Client</span><span class="p">.</span><span class="nx">applyToAll</span><span class="p">(</span> <span class="nx">client</span> <span class="p">=&gt;</span> <span class="p">{</span> 
         <span class="c1">// If not using TwoThumbs, must set this before calling addScoreToSummary. </span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">client</span><span class="p">.</span><span class="nx">touchScreenUsage</span><span class="p">)</span> <span class="nx">client</span><span class="p">.</span><span class="nx">virtualGamePadUsage</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">client</span><span class="p">.</span><span class="nx">score</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">client</span><span class="p">.</span><span class="nx">addScoreToSummary</span><span class="p">(</span> <span class="nx">playTime_s</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nx">gW</span><span class="p">.</span><span class="nx">getDemoIndex</span><span class="p">(),</span> <span class="kc">false</span><span class="p">);</span>
      <span class="p">});</span>
      
      <span class="nx">lB</span><span class="p">.</span><span class="nx">reportGameResults</span><span class="p">();</span>
      <span class="c1">// Send a score for each human player to the leader-board. Build leader-board report at the end.</span>
      <span class="nx">lB</span><span class="p">.</span><span class="nx">submitScoresThenReport</span><span class="p">();</span>
      <span class="c1">// Open up the multi-player panel so you can see the leader-board report.</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">gW</span><span class="p">.</span><span class="nx">dC</span><span class="p">.</span><span class="nx">multiplayer</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span> <span class="p">{</span>  
         <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#chkMultiplayer&#39;</span><span class="p">).</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">let</span> <span class="nx">shooterCount</span> <span class="o">=</span> <span class="p">(</span><span class="nx">m_gameState</span><span class="p">[</span><span class="s1">&#39;shutDown&#39;</span><span class="p">])</span> <span class="o">?</span> <span class="p">(</span><span class="nx">m_initialTeamSize</span> <span class="o">-</span> <span class="nx">m_playList</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="nx">m_initialTeamSize</span><span class="p">;</span>
      
      <span class="c1">// This series effectively waits until the message in gameTitle finishes (waits messageDelay seconds).</span>
      <span class="kd">let</span> <span class="nx">theSeries</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">m_version</span> <span class="o">==</span> <span class="s2">&quot;v2&quot;</span><span class="p">)</span> <span class="p">{</span>
         <span class="kd">let</span> <span class="nx">quoteString</span> <span class="o">=</span> <span class="p">(</span><span class="nx">shooterCount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;quote&#39;</span> <span class="o">:</span> <span class="s1">&#39;quotes&#39;</span><span class="p">;</span>
         <span class="nx">theSeries</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">1</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="nx">messageDelay</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[1px Arial].&quot;</span><span class="p">},</span>
            <span class="mi">2</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[35px Arial]That&#39;s a pretty good civics lesson!&quot;</span><span class="p">},</span>
            <span class="mi">3</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[35px Arial]&quot;</span> <span class="o">+</span> <span class="nx">m_numberNames</span><span class="p">[</span> <span class="nx">shooterCount</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">quoteString</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="p">},</span>
            <span class="mi">4</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[35px Arial]&quot;</span> <span class="o">+</span> <span class="nx">m_partisanNature</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span><span class="p">},</span>
            <span class="mi">5</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[35px Arial]Thanks for playing along.&quot;</span><span class="p">},</span>
            <span class="mi">6</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]      .&quot;</span><span class="p">},</span>
            <span class="mi">7</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]     ...&quot;</span><span class="p">},</span>   
            <span class="mi">8</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]    .....&quot;</span><span class="p">},</span>
            <span class="mi">9</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]   .......&quot;</span><span class="p">},</span>
           <span class="mi">10</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]    .....&quot;</span><span class="p">},</span>
           <span class="mi">11</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]     ...&quot;</span><span class="p">},</span>
           <span class="mi">12</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]      .&quot;</span><span class="p">},</span>
           <span class="mi">13</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">3.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[30px Arial]press the 5 key to start again...&quot;</span><span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="kd">let</span> <span class="nx">politicianString</span> <span class="o">=</span> <span class="p">(</span><span class="nx">shooterCount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;politician&#39;</span> <span class="o">:</span> <span class="s1">&#39;politicians&#39;</span><span class="p">;</span>
         <span class="kd">let</span> <span class="nx">playingString</span> <span class="o">=</span> <span class="p">(</span><span class="nx">shooterCount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="s1">&#39; together&#39;</span><span class="p">;</span>
         <span class="nx">theSeries</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">1</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="nx">messageDelay</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[1px Arial].&quot;</span><span class="p">},</span>
            <span class="mi">2</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[35px Arial]That&#39;s pretty good coaching!&quot;</span><span class="p">},</span>
            <span class="mi">3</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[35px Arial]&quot;</span> <span class="o">+</span> <span class="nx">m_numberNames</span><span class="p">[</span> <span class="nx">shooterCount</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">politicianString</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="p">},</span>
            <span class="mi">4</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[35px Arial]&quot;</span> <span class="o">+</span> <span class="nx">m_partisanNature</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="p">},</span>
            <span class="mi">5</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[35px Arial]playing&quot;</span> <span class="o">+</span> <span class="nx">playingString</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span><span class="p">},</span>
            <span class="mi">6</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]      .&quot;</span><span class="p">},</span>
            <span class="mi">7</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]     ...&quot;</span><span class="p">},</span>   
            <span class="mi">8</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]    .....&quot;</span><span class="p">},</span>
            <span class="mi">9</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]   .......&quot;</span><span class="p">},</span>
           <span class="mi">10</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]    .....&quot;</span><span class="p">},</span>
           <span class="mi">11</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]     ...&quot;</span><span class="p">},</span>
           <span class="mi">12</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]      .&quot;</span><span class="p">},</span>
           <span class="mi">13</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">3.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[30px Arial]press the 5 key to start again...&quot;</span><span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help2&#39;</span><span class="p">].</span><span class="nx">loc_px</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="o">:</span><span class="mi">325</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="o">:</span><span class="mi">230</span><span class="p">};</span>
      <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help2&#39;</span><span class="p">].</span><span class="nx">newMessageSeries</span><span class="p">(</span> <span class="nx">theSeries</span><span class="p">);</span>
      
      <span class="c1">// If no successful miller basket, delay a check until after the main closing message. </span>
      <span class="c1">// Check if the miller puck has been used. Modify the encouraging message to reflect that.</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">m_millerAvailable</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">m_millerShot</span> <span class="o">!=</span> <span class="s1">&#39;made it&#39;</span><span class="p">))</span> <span class="p">{</span>
         <span class="nx">m_closingRemark</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nx">stringOfEncouragement</span> <span class="o">=</span> <span class="p">(</span><span class="nx">m_millerShot</span> <span class="o">==</span> <span class="s1">&#39;attempted&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;Give the mystery man another try.&quot;</span> <span class="o">:</span> <span class="s2">&quot;I wouldn&#39;t mind a little ride too.&quot;</span><span class="p">;</span> 
            <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help2&#39;</span><span class="p">].</span><span class="nx">newMessageSeries</span><span class="p">(</span> <span class="p">{</span>   
              <span class="mi">1</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]      .&quot;</span><span class="p">},</span>
              <span class="mi">2</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]     ...&quot;</span><span class="p">},</span>   
              <span class="mi">3</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]    .....&quot;</span><span class="p">},</span>
              <span class="mi">4</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]     ...&quot;</span><span class="p">},</span>
              <span class="mi">5</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">0.3</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[50px Arial]      .&quot;</span><span class="p">},</span>
              <span class="mi">6</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">2.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[30px Arial]before you go...&quot;</span><span class="p">},</span>
              <span class="mi">7</span><span class="o">:</span><span class="p">{</span><span class="s1">&#39;tL_s&#39;</span><span class="o">:</span><span class="mf">3.0</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="s2">&quot;[30px Arial]&quot;</span> <span class="o">+</span> <span class="nx">stringOfEncouragement</span><span class="p">}</span>
            <span class="p">});</span>
         <span class="p">},</span> <span class="nx">gW</span><span class="p">.</span><span class="nx">messages</span><span class="p">[</span><span class="s1">&#39;help2&#39;</span><span class="p">].</span><span class="nx">getDurationOfSeries_s</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
      <span class="p">}</span>
         
      <span class="nx">m_reportedWin</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>   
   <span class="p">}</span>
   
   <span class="c1">// see comments before the &quot;return&quot; section of gwModule.js</span>
   <span class="k">return</span> <span class="p">{</span>
      <span class="c1">// Objects</span>
      <span class="s1">&#39;gameState&#39;</span><span class="o">:</span> <span class="nx">m_gameState</span><span class="p">,</span>
      
      <span class="c1">// Variables</span>
      
      <span class="c1">// Methods</span>
      <span class="s1">&#39;initializeModule&#39;</span><span class="o">:</span> <span class="nx">initializeModule</span><span class="p">,</span>
      
      <span class="s1">&#39;resetShotState&#39;</span><span class="o">:</span> <span class="nx">resetShotState</span><span class="p">,</span>
      <span class="s1">&#39;initializeGame&#39;</span><span class="o">:</span> <span class="nx">initializeGame</span><span class="p">,</span>
      <span class="s1">&#39;checkTimeLimit&#39;</span><span class="o">:</span> <span class="nx">checkTimeLimit</span><span class="p">,</span>
      <span class="s1">&#39;processBasketBallCollisions&#39;</span><span class="o">:</span> <span class="nx">processBasketBallCollisions</span>
   <span class="p">};</span>

<span class="p">})();</span>
</pre></div>
</body>
</html>
